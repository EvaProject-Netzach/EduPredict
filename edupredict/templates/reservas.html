{% extends 'base/base.html' %}

{% block titulo %}
  Reservas: {{ user.username }}
{% endblock %}

{% block contenido %}
<div class="mb-5">
  <div class="alert alert-warning col-6 offset-md-3" role="alert">
    <h2 class="text-center">AquÃ­ puedes ver las Reservas ðŸ˜‰</h2>
  </div>
</div>

<table class="table" id="productos">
    <thead>
        <tr class="table-warning">
            <th scope="col">ID</th>
            <th scope="col">Nombre</th>
            <th scope="col">Telefono</th>
            <th scope="col">Fecha</th>
            <th scope="col">Hora</th>
            <th scope="col">Cantidad</th> 
            <th scope="col">Estado</th>
            <th scope="col">Observacion</th>
            <th scope="col">Acciones</th>
        </tr>
    </thead>
    <tbody>
        {% if reservas %}
        {% for reserva in reservas %}
        <tr class="table-light">
            <th scope="row">{{ reserva.id }}</th>
            <td>{{ reserva.nombre }}</td>
            <td>{{ reserva.telefono }}</td>
            <td>{{ reserva.fecha }}</td>
            <td>{{ reserva.hora }}</td>
            <td>{{ reserva.cantidad }}</td> 
            <td>{{ reserva.estado }}</td> 
            <td>{{ reserva.observacion }}</td> 
            <td>
                <a href="{% url 'editarReservas' reserva.id %}" class="btn btn-warning"><i class="bi bi-pencil"></i></a>
                
                  <button class="btn btn-danger"><i class="bi bi-trash" data-bs-toggle="modal" data-bs-target="#exampleModal{{ reserva.id }}"></i></button>
                
            </td>
        </tr>

        <div class="modal fade" id="exampleModal{{ reserva.id }}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h1 class="modal-title fs-5" id="exampleModalLabel">ConfirmaciÃ³n</h1>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  Â¿EstÃ¡s seguro de que deseas eliminar la reserva {{ reserva.id }}?
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                  <a type="button" href="{% url 'eliminarReservas' reserva.id %}" class="btn btn-primary">Confirmar</a>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
        {% else %}
        <tr>
            <td colspan="9" class="text-center"><h3 class="mt-3 mb-3">No hay reservas registradas</h3></td>
        </tr>
        {% endif %}
    </tbody>
</table>
{% endblock %}